# Random Eats 开发文档

## **项目简介**
Random Eats是一款简单易用的 iOS 应用，旨在帮助用户快速生成随机菜谱，提供菜谱的名称、食材及其用量、制作步骤等基本信息。本项目的开发重点是实现基本功能，包括随机生成菜谱、菜谱展示和分类生成功能。

---

## **目标用户**
1. 日常为家人或自己准备食物但缺乏灵感的用户。
2. 想尝试新菜谱或探索不同菜系的用户。

---

## **功能概述**

### **基本功能**
1. **随机生成菜谱**
   - 点击按钮即可随机生成一道菜谱，显示名称、食材、制作步骤。
   - 界面实时更新菜谱信息，避免重复显示。
   - 支持在线获取最新菜谱数据。
   - 提供加载状态指示和错误重试机制。

2. **菜谱展示**
   - 菜谱的详细页面包括：
     - 菜谱名称。
     - 所需食材及用量。
     - 简单制作步骤。
     - 高质量菜品图片，支持异步加载。
   - 优化的食材和步骤显示格式。
   - 支持图片加载失败的优雅降级处理。

3. **分类功能**
   - 用户可以选择特定分类生成相关菜谱。
   - 支持中英文分类名称显示。
   - 分类选择状态持久化存储。
   - 提供分类选择的视觉反馈。
   - 实时更新当前选中的分类显示。

4. **数据管理**
   - 使用 TheMealDB API 获取实时菜谱数据。
   - 支持按分类筛选的 API 调用。
   - 完善的错误处理机制。
   - 网络请求超时处理。
   - 用户友好的错误提示。

5. **收藏功能**
   - 用户可以收藏喜欢的菜谱。
   - 提供收藏列表查看功能。
   - 支持取消收藏。
   - 收藏数据使用 UserDefaults 进行本地持久化存储。

6. **主题设置**
   - 支持深色/浅色模式切换。
   - 主题设置本地持久化。
   - 自定义主题颜色系统。
   - 实时切换主题效果。

7. **启动体验**
   - 精美的启动画面动画。
   - 动态图标和渐变效果。
   - 平滑的过渡动画。
   - 品牌展示和用户引导。

### **用户交互功能**
- **随机生成按钮**：单击即可生成随机菜谱。
- **导航功能**：
  - 主界面提供进入分类页面的入口。
  - 分类页面允许用户返回主界面或直接生成菜谱。
- **收藏操作**：
  - 在菜谱详情页可以添加/取消收藏。
  - 通过主界面可以访问收藏列表。
  - 支持从收藏列表中删除菜谱。
- **主题切换**：
  - 通过设置页面切换深色/浅色模式。
  - 主题设置实时生效并保存。
  - 优雅的切换动画效果。
- **错误处理**：
  - 网络请求失败时提供重试选项。
  - 友好的错误提示信息。
  - 加载状态指示器。
- **启动体验**：
  - 展示品牌标识和动画效果。
  - 自动过渡到主界面。
  - 流畅的动画交互。

---

## **开发技术**

### **技术选型**
1. **编程语言**：Swift
2. **开发框架**：
   - SwiftUI 用于 UI 构建
   - Combine 用于异步数据流处理
3. **网络请求**：
   - URLSession 用于 API 调用
   - Combine 用于响应式数据处理
4. **数据存储**：UserDefaults 用于本地数据持久化
5. **支持版本**：iOS 14 及更高版本

### **主要技术点**
1. 使用 SwiftUI 构建现代化用户界面。
2. 使用 Combine 框架处理异步网络请求。
3. 实现 MVVM 架构分离数据和界面逻辑。
4. 使用 URLSession 进行 API 调用。
5. 使用 UserDefaults 实现数据持久化。
6. 实现 SwiftUI 动画系统。
7. 实现主题管理系统。
8. 使用环境对象（EnvironmentObject）管理全局状态。
9. 实现网络错误处理和重试机制。
10. 实现异步图片加载和缓存。

---

## **系统架构设计**

### **数据结构设计**

#### API 数据模型
```swift
struct Recipe: Identifiable, Codable, Hashable {
    let id: String
    let name: String
    let category: String?
    let image: String
    var ingredients: [Ingredient]
    var steps: [String]
}

struct Ingredient: Codable, Hashable {
    let name: String
    let amount: String
}

struct MealDBRecipe: Codable {
    let idMeal: String
    let strMeal: String
    let strCategory: String?
    let strMealThumb: String?
    let strInstructions: String?
    // 食材和用量字段
}
```

### **模块划分**
1. **数据层（Model）**
   - API 响应模型
   - 本地数据模型
   - 错误处理模型

2. **网络层（Service）**
   - API 服务封装
   - 网络请求处理
   - 错误处理和重试逻辑

3. **视图模型层（ViewModel）**
   - 处理 API 调用和数据转换
   - 管理 UI 状态
   - 处理用户交互逻辑
   - 管理收藏数据

4. **视图层（View）**
   - 主界面：显示随机菜谱和操作按钮
   - 菜谱详情：展示完整菜谱信息
   - 分类选择：提供分类筛选
   - 收藏列表：管理收藏的菜谱
   - 设置界面：主题设置等

---

## **界面设计**

### **整体设计风格**
- 采用现代简约的设计风格
- 统一的颜色系统和主题支持
- 流畅的动画和过渡效果
- 清晰的视觉层次结构

### **主要界面组成**

1. **主页面（RecipeHomeView）**
   - 顶部分类显示
   - 醒目的随机生成按钮
   - 菜谱卡片展示区域
   - 加载状态指示器
   - 错误提示和重试按钮

2. **菜谱详情（RecipeDetailView）**
   - 大图展示区域
   - 菜品名称和分类
   - 食材清单
   - 步骤说明
   - 收藏按钮

3. **分类选择**
   - 横向滚动的分类列表
   - 选中状态视觉反馈
   - 中文分类名称显示

4. **收藏页面（FavoriteView）**
   - 列表式展示收藏的菜谱
   - 支持滑动删除
   - 可点击查看详情
   - 空状态友好提示

5. **设置页面（SettingsView）**
   - 分组式设置项展示
   - 主题切换开关
   - 版本信息展示
   - 简洁的列表布局

### **交互设计**

1. **导航系统**
   - 底部标签栏导航
   - 直观的图标和文字说明
   - 标签切换动画效果

2. **手势操作**
   - 支持返回手势
   - 列表项滑动操作
   - 自然的滚动效果

3. **状态反馈**
   - 加载状态指示
   - 错误提示和重试选项
   - 操作成功提示
   - 网络状态提示

4. **动画效果**
   - 页面切换过渡动画
   - 按钮点击反馈
   - 主题切换渐变效果
   - 加载动画

---

## **未来规划**
1. **离线支持**：实现本地缓存，支持离线查看已加载的菜谱。
2. **搜索功能**：添加菜谱搜索功能。
3. **自定义分类**：允许用户创建自己的菜谱分类。
4. **多语言支持**：添加更多语言的本地化支持。
5. **数据同步**：支持跨设备同步收藏的菜谱。
6. **社交分享**：添加分享菜谱到社交媒体的功能。
7. **个性化推荐**：基于用户收藏历史推荐菜谱。

---
